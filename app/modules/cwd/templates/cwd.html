{% extends 'base.html' %} {% block head %}
<title>CWD | New Utility</title>
{% endblock %} {% block styles %}
<link
  rel="stylesheet"
  href="{{ url_for('static', filename='dist/css/cwd.css') }}"
/>
{% endblock %} {% block body %}
<h1>Chat with Docs</h1>
<div class="content-wrap">
  <div class="left-column">
    <button id="toggleRightColumn" class="custom-button">
      Toggle Doc Center
    </button>
    <div class="query-container" style="position: relative">
      <h3>Query Text Document</h3>
      <div id="query-results-section">
        <div id="history-container">
          <!-- History will go here -->
        </div>
        <div id="current-query">
          <p style="display: none">
            <strong>Query: </strong><span id="user_query"></span>
          </p>
          <div id="response_container" style="display: none">
            <strong>Response: </strong>
            <pre><span id="results"></span></pre>
          </div>
        </div>
      </div>
    </div>
    <div class="input-container">
      <div id="query-input-section">
        <!-- Wrap the input in a div -->
        <div class="input-wrapper">
          <input
            type="text"
            id="query"
            name="query"
            placeholder="Enter your query here..."
          />
          <button id="queryButton" onclick="queryDocument()" disabled>
            <img
              class="submit-arrow"
              src="https://res.cloudinary.com/dn9bcrimg/image/upload/v1694930458/right-arrow-svgrepo-com_drke3l.svg"
              alt="Submit Arrow"
            />
          </button>
        </div>
        <button id="interruptButton" onclick="interruptQuery()" disabled>
          Interrupt
        </button>
      </div>
      <div class="alerts queryAlerts"></div>
    </div>
  </div>
  <div class="right-column">
    <div class="docs-container">
      <h4>Doc Selector</h4>
      <div id="uploaded-docs-section">
        <form id="docSelectionForm">
          <ul id="uploaded_docs_list">
            {% for document in documents %}
            <li id="document-{{ document.id }}">
              <input
                type="checkbox"
                name="selected_docs"
                value="{{ document.id }}"
                checked
              />
              <div>{{ document.title }}</div>
              <form
                action="{{ url_for('embedding_bp.delete_document', document_id=document.id) }}"
                method="post"
              ></form>
            </li>
            <div class="button-container">
              <button
                type="button"
                class="btn-icon delete-btn"
                data-doc-id="{{ document.id }}"
                title="Delete Document"
              >
                <i class="fa fa-trash"></i>
              </button>
            </div>
            {% endfor %}
          </ul>
        </form>
      </div>
      <div id="docs-alerts"></div>
    </div>
  </div>
</div>
{% block scripts %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/showdown/1.9.1/showdown.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
<script src="{{ url_for('static', filename='dist/js/cwd.js') }}"></script>
{% endblock %}{% endblock %}
